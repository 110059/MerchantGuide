var Constants=require("./config"),romanNumerals=Constants.romanNumerals,isValueRegEx=Constants.isValueRegEx,isCreditRegEx=Constants.isCreditRegEx,HowMuchRegEx=Constants.HowMuchRegEx,HowManyRegEx=Constants.HowManyRegEx,isValidRomanRegEx=Constants.isValidRomanRegEx,romanNumeralsVal=Constants.romanNumeralsVal,galaxyUnits={},galaxyCurrency={},ConvertCurrencyToValue=function(e,o,r,n){var a="";galaxyCurrency=o||galaxyCurrency,galaxyUnits=r||galaxyUnits,romanNumeralsVal=n||romanNumeralsVal;for(var l=0;l<e.length;l++){if(!galaxyCurrency[e[l].toLowerCase()])return galaxyUnits[e[l].toLowerCase()]?(console.log(e[l]+" is not currency,it's a unit"),-1):(console.log("Unknown currency "+e[l]+" queried"),-1);a+=galaxyCurrency[e[l].toLowerCase()]}if(!isValidRomanRegEx.test(a))return console.log("Invalid amount "+e.join(" ")),-1;var s=[];return a.split("").forEach(function(e,o,r){s.push(romanNumeralsVal[e]),romanNumeralsVal[e]<romanNumeralsVal[r[o+1]]&&(s[o]*=-1)}),s.reduce(function(e,o){return e+o})};exports.MerchantGuide=function(e){var o=null;if(null===(o=isValueRegEx.exec(e))){if(null!==(o=isCreditRegEx.exec(e))){var r=parseFloat(o[2]);if(""===(l=o[1].trim()))return console.log("Please enter any currency");n=(l=l.split(/\s+/)).pop();return galaxyCurrency[n.toLowerCase()]?console.log(n+" is currency,provide a Unit"):l.length<1?console.log("No Currency provided"):r/(a=ConvertCurrencyToValue(l))<1e-5?console.log("Credit is too low"):-1===a?console.log("Invalid Currency"):(a=r/a,void(galaxyUnits[n.toLowerCase()]=a))}if(null!==(o=HowMuchRegEx.exec(e)))return""===(l=o[1].trim())?console.log("Please enter any currency to convert"):(l=l.split(/\s+/),-1!==(a=ConvertCurrencyToValue(l))?console.log(l.join(" ")+" is "+a):console.log("Invalid Currency"));if(null!==(o=HowManyRegEx.exec(e))){if(""===(l=o[1].trim()))return console.log("Please enter any currency");var n=(l=l.split(/\s+/)).pop();if(!galaxyUnits[n.toLowerCase()])return console.log("No unit Provided");if(l.length<1)return console.log("No Currency provided");var a=ConvertCurrencyToValue(l);return-1!==a?(a*=galaxyUnits[n.toLowerCase()],console.log(o[1].trim()+" is "+a.toFixed(5)+" Credits")):console.log("Invalid Currency")}return console.log("I have no idea what you are talking about")}var l=o[0].split(/\s+/);if(galaxyCurrency[l[0].toLowerCase()])galaxyCurrency[l[0].toLowerCase()]!==romanNumeralsVal[l[2].toLowerCase()]&&console.log(l[0]+" already has a conversion unit");else{var s=romanNumerals.indexOf(l[2].toLowerCase());s>-1?(galaxyCurrency[l[0].toLowerCase()]=l[2].toLowerCase(),romanNumerals.splice(s,1)):console.log(l[2]+" is already assigned")}},exports.ConvertCurrencyToValue=ConvertCurrencyToValue;